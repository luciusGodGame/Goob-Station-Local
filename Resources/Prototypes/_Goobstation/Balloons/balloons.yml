# SPDX-FileCopyrightText: 2025 Arraydeess <arraygitbash@gmail.com>
# SPDX-FileCopyrightText: 2025 GoobBot <uristmchands@proton.me>
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  name: "базова кулька"
  parent: BaseStructureDynamic
  id: BaseBalloon       # Base balloon
  abstract: true # Make sure it doesn't appear
  components:
  - type: Sprite
    sprite: _Goobstation/Objects/Fun/balloons.rsi
    state: icon
    drawdepth: Overdoors # just so it renders above spesos
    noRot: True
  - type: Item
    size: Huge
  - type: Damageable
    damageContainer: RubberBalloon # default damage container
  - type: Physics # has dynamic physics
    bodyType: Dynamic
  - type: Penetratable # projectile Able to pierce balloons
    penetrateDamage: 1
    damagePenalty: 0.5
  - type: NpcFactionMember
    factions:
      - Balloon
  - type: InteractionOutline
  - type: Fixtures # give it locker collision
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.25,-0.48,0.25,0.48"
        density: 75
        mask:
          - TabletopMachineMask
        layer:
          - TabletopMachineLayer    # No collision but still able to be shot

# Red Balloon
- type: entity
  name: "червона кулька"
  parent: BaseBalloon
  description: "Найслабша кулька."
  id: RedBalloon
  components:
  - type: Sprite
    state: red
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
        spawn:
          SpaceCash:
            min: 10
            max: 20
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# Blue Balloon
- type: entity
  name: "синя кулька"
  parent: BaseBalloon
  description: "Досить спокійна кулька."
  id: BlueBalloon
  components:
  - type: Sprite
    state: blue
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 5
            max: 10
          RedBalloon:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# Green Balloon
- type: entity
  name: "зелена кулька"
  parent: BaseBalloon
  description: "Найбільш стратегічно мисляча з усіх. Здатна планувати складні хвилі, якби лише мала доріжку, якою рухатися."
  id: GreenBalloon
  components:
  - type: Sprite
    state: green
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 5
            max: 10
          BlueBalloon:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# Yellow Balloon
- type: entity
  name: "жовта кулька"
  parent: BaseBalloon
  description: "Найжадібніша кулька, завжди хизується своїм багатством перед іншими."
  id: YellowBalloon
  components:
  - type: Sprite
    state: yellow
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 5
            max: 10
          GreenBalloon:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# Pink Balloon
- type: entity
  name: "рожева кулька"
  parent: BaseBalloon
  description: "Найбільш дратівлива та нестерпна кулька."
  id: PinkBalloon
  components:
  - type: Sprite
    state: pink
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 5
            max: 10
          YellowBalloon:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# Black Balloon
- type: entity
  name: "чорна кулька"
  parent: BaseBalloon
  description: "Найбільш похмура кулька, так і не вийшла зі своєї емо-фази. Імунна до теплової та електричної шкоди!"
  id: BlackBalloon
  components:
  - type: Sprite
    state: black
  - type: Damageable
    damageContainer: BlackBalloon
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 1
            max: 3
          PinkBalloon:
            min: 2
            max: 2
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
# White Balloon
- type: entity
  name: "біла кулька"
  parent: BaseBalloon
  description: "Найбеземоційніша кулька. Їй навіть не дають справжнього імені — лише призначення. Імунна до холодової шкоди!"
  id: WhiteBalloon
  components:
  - type: Sprite
    state: white
  - type: Damageable
    damageContainer: WhiteBalloon
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 1
            max: 3
          PinkBalloon:
            min: 2
            max: 2
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# Zebra Balloon
- type: entity
  name: "кулька-зебра"
  parent: BaseBalloon
  description: "Їй місце в зоопарку. Імунна до всіх опікових ушкоджень!"
  id: ZebraBalloon
  components:
  - type: Sprite
    state: zebra
  - type: Damageable
    damageContainer: ZebraBalloon
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 1
            max: 3
          WhiteBalloon:
            min: 1
            max: 1
          BlackBalloon:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# steel balloon
- type: entity
  name: "сталева кулька"
  parent: BaseBalloon
  description: "Найбільш броньована кулька. Її так бояться, що навіть тварини на неї не нападають. Імунна до тупої шкоди!"
  id: SteelBalloon
  components:
  - type: Sprite
    state: steel
  - type: Damageable        # only damagable via heat
    damageContainer: SteelBalloon
  - type: Penetratable # projectile Able to pierce balloons
    penetrateDamage: 1000
    damagePenalty: 1000
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 1
            max: 3
          BlackBalloon:
            min: 2
            max: 2
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# rainbow balloon
- type: entity
  name: "райдужна кулька"
  parent: BaseBalloon
  description: "Найзловісніша з усіх кульок. Не дайте гарним кольорам вас обманути."
  id: RainbowBalloon
  components:
  - type: Sprite
    state: rainbow
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1           # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 1
            max: 3
          ZebraBalloon:
            min: 2
            max: 2
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
        # Bloons 2
- type: entity
  name: "кулька-короп"
  parent: BaseBalloon
  description: "Це поєднання кульки та ДНК коропа? Чи кулька в костюмі коропа? Ніхто не знає."
  id: CeramicBalloon
  components:
  - type: Sprite
    state: carp
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 10        # balloon health
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
          params:
            variation: 0.125
            volume: -4
      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
         spawn:
          SpaceCash:
            min: 1
            max: 3
          RainbowBalloon:
            min: 2
            max: 2
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# This fucking kills server performance
#- type: entity
#  name: dragon zepplin
#  parent: BaseBalloon
#  description: Tier 1 Moab Class Balloon. Summons four carp balloons on death.
#  id: MoabBalloon
#  components:
#  - type: Sprite
#    sprite: _Goobstation/Objects/Fun/moabs.rsi # Had to change RSI due to different pixel dimensions
#    state: dragon
#    noRot: false
#  - type: Transform
#  - type: Rotatable
#  - type: Destructible
#    thresholds:
#    - trigger:
#        !type:DamageTrigger
#        damage: 50     # balloon health, Nerfed asf
#      behaviors:
#      - !type:PlaySoundBehavior
#        sound:
#          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
#          params:
#            variation: 0.125
#            volume: -4
#      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
#         spawn:
#          SpaceCash:
#            min: 1
#            max: 3
#          CeramicBalloon:
#            min: 4
#            max: 4
#      - !type:DoActsBehavior
#        acts: [ "Destruction" ]
#
#- type: entity
#  name: B.R.B.
#  parent: BaseBalloon
#  description: Tier 2 Moab Class Balloon. Stands for Blood Red Balloon.
#  id: BfbBalloon
#  components:
#  - type: Sprite
#    sprite: _Goobstation/Objects/Fun/moabs.rsi # Had to change RSI due to different pixel dimensions
#    state: brb
#    noRot: false
#  - type: Destructible
#    thresholds:
#    - trigger:
#        !type:DamageTrigger
#        damage: 75       # balloon health
#      behaviors:
#      - !type:PlaySoundBehavior
#        sound:
#          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
#          params:
#            variation: 0.125
#            volume: -4
#      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
#         spawn:
#          SpaceCash:
#            min: 1
#            max: 3
#          MoabBalloon:
#            min: 4
#            max: 4
#      - !type:DoActsBehavior
#        acts: [ "Destruction" ]
#
#- type: entity
#  name: Z.O.M.B.
#  parent: BaseBalloon
#  description: Tier 3 Moab Class Balloon. Stands for Zoh Oh Mbee Balloon. The Acronym department was underfunded.
#  id: ZomgBalloon
#  components:
#  - type: Sprite
#    sprite: _Goobstation/Objects/Fun/moabs.rsi # Had to change RSI due to different pixel dimensions
#    state: zomb
#    noRot: false
#  - type: Destructible
#    thresholds:
#    - trigger:
#        !type:DamageTrigger
#        damage: 100       # balloon health
#      behaviors:
#      - !type:PlaySoundBehavior
#        sound:
#          path: /Audio/_Goobstation/BalloonEffect/balloon_pop.ogg
#          params:
#            variation: 0.125
#            volume: -4
#      - !type:SpawnEntitiesBehavior # Balloon Loot and spawn
#         spawn:
#          SpaceCash:
#            min: 1
#            max: 3
#          BfbBalloon:
#            min: 4
#            max: 4
#      - !type:DoActsBehavior
#        acts: [ "Destruction" ]
#
